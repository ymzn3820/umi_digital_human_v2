(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childCont-clone-voice_clone"],{"2e3a":function(t,e,i){"use strict";i.r(e);var n=i("d80c"),o=i("6239");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("e84f");var s=i("f0c5"),c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"10048f77",null,!1,n["a"],void 0);e["default"]=c.exports},"603e":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.audio-card[data-v-020987a8]{display:flex;flex-direction:column;padding:%?20?% %?24?%}.audio-card .title[data-v-020987a8]{color:#000;font-size:%?30?%;font-weight:500;width:80%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.audio-card .audio[data-v-020987a8]{margin-top:%?15?%;display:flex}.audio-card .audio .play-icon[data-v-020987a8]{width:%?60?%;height:%?60?%;margin-right:%?15?%}.audio-card .audio .audio-main[data-v-020987a8]{height:%?48?%;flex:1;margin-left:%?15?%}.audio-card .audio .progress[data-v-020987a8]{margin:0}.audio-card .audio .time[data-v-020987a8]{width:100%;height:%?50?%;font-size:%?24?%;font-weight:400;color:#666;margin-top:%?-15?%;display:flex;align-items:center;justify-content:space-between}',""]),t.exports=e},6239:function(t,e,i){"use strict";i.r(e);var n=i("f969"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},7471:function(t,e,i){var n=i("8a6a");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("1894be76",n,!0,{sourceMap:!1,shadowMode:!1})},7551:function(t,e,i){"use strict";(function(t){i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a9e3"),i("99af");var n={props:{audio:{type:String,default:""},title:{default:"语音合成"},sliderColor:{type:String,default:"#1F64FF"},activeColor:{type:String,default:"#1F64FF"},backgroundColor:{type:String,default:"#EFEFEF"}},data:function(){return{innerAudioContext:null,isPlay:!1,timer:null,currentTime:0,duration:0,progress:0,intervalID:null,startImg:t.baseImg+"/xcx/e47bc10b-bb4c-43a1-8d5a-1bda0b917003.jpg",endImg:t.baseImg+"/xcx/90a9be00-0c42-440e-9ea9-267e52d7808b.jpg"}},watch:{audio:{handler:function(t){this.creatAudio()},deep:!0,immediate:!0}},destroyed:function(){this.innerAudioContext.destroy()},methods:{creatAudio:function(){var t=this;this.innerAudioContext=uni.createInnerAudioContext(this),this.innerAudioContext.src=encodeURI(this.audio),this.innerAudioContext.sessionCategory="soloAmbient",this.innerAudioContext.autoplay=!0,this.innerAudioContext.volume=0,this.innerAudioContext.startTime=0,this.innerAudioContext.play(),this.innerAudioContext.onTimeUpdate((function(){})),this.innerAudioContext.onCanplay((function(){t.intervalID=setInterval((function(){0!==t.innerAudioContext.duration&&(clearInterval(t.intervalID),t.duration=t.innerAudioContext.duration)}),100)})),setTimeout((function(){t.innerAudioContext.pause()}),100)},audioPlay:function(){this.dateFormart(this.currentTime)===this.dateFormart(this.duration)&&(this.progress=100),this.innerAudioContext.src=encodeURI(this.audio),this.innerAudioContext.startTime=0,this.innerAudioContext.volume=1,this.innerAudioContext.sessionCategory="soloAmbient",this.innerAudioContext.seek(100===Number(this.progress)?0:this.currentTime?this.currentTime:0),this.innerAudioContext.startTime=100===Number(this.progress)?0:this.currentTime?this.currentTime:0,this.innerAudioContext.play(),this.onCanplay(),this.isPlay=!0},onCanplay:function(){var t=this;this.innerAudioContext.onCanplay((function(){t.currentTime=t.innerAudioContext.currentTime})),this.innerAudioContext.onTimeUpdate((function(){t.currentTime=t.innerAudioContext.currentTime,t.progress=(t.innerAudioContext.currentTime/t.innerAudioContext.duration*100).toFixed(2)})),this.innerAudioContext.onEnded((function(){t.isPlay&&(t.isPlay=!1)}))},audioPause:function(){this.innerAudioContext.pause(),this.isPlay=!this.isPlay},handleProgress:function(t){this.innerAudioContext.pause()},handleChange:function(t){this.progress=t.detail.value,this.currentTime=this.duration*(t.detail.value/100),this.audioPlay()},dateFormart:function(t){t=Number(t).toFixed(0);var e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=t-3600*e-60*i;return e=e<10?"0".concat(e):e,i=i<10?"0".concat(i):i,n=n<10?"0".concat(Math.floor(n)):Math.floor(n),"".concat(i,":").concat(n)}}};e.default=n}).call(this,i("c8ba"))},"8a6a":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".heads[data-v-10048f77]{background:#f6f8fb;min-height:100vh}.tab_li[data-v-10048f77]{background:#fff}.cont_title[data-v-10048f77]{width:100%;padding:%?20?%;display:flex;align-items:center;justify-content:center;flex-direction:column}.cont_title .title_t[data-v-10048f77]{color:#000;font-size:%?32?%;font-style:normal;font-weight:500;line-height:%?64?%}.cont_title .title_b[data-v-10048f77]{color:#666;font-size:%?28?%;font-style:normal;font-weight:400;line-height:%?56?%}.cont_text[data-v-10048f77]{background:#fff;border-radius:%?10?%;padding:%?30?% %?0?%}.cont_text .cont_step[data-v-10048f77]{padding:0 %?20?%}.cont_text .cont_step .step_t[data-v-10048f77]{display:flex;align-items:center;margin-bottom:%?20?%}.cont_text .cont_step .step_t .t_l[data-v-10048f77]{width:%?50?%;height:%?50?%;border-radius:50%;background:#1f64ff;display:flex;align-items:center;justify-content:center;color:#fff;font-size:%?32?%;margin-right:%?20?%}.cont_text .cont_step .step_t .t_r[data-v-10048f77]{color:#333;font-size:%?32?%;font-style:normal;font-weight:500;line-height:150%}.cont_text .cont_step .step_bt[data-v-10048f77]{color:#505257;font-size:%?22?%;font-style:normal;font-weight:400;line-height:150%}.cont_text .voice_up[data-v-10048f77]{border-radius:%?10?%;border:%?1?% dashed #d1d3d6;background:#fbfcff;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:%?40?% %?20?%}.cont_text .voice_up .up_img[data-v-10048f77]{width:%?120?%;height:%?100?%}.cont_text .voice_up .up_text[data-v-10048f77]{color:#666;font-size:%?27?%;font-style:normal;font-weight:400;line-height:150%;text-align:center}.cont_text .voice_up .up_del[data-v-10048f77]{width:100%;display:flex;justify-content:flex-end}.cont_text .video_cont[data-v-10048f77]{width:calc(100%);background:#fff;padding:%?40?% %?30?%;flex:1;margin-bottom:%?20?%}.cont_text .video_cont .tip[data-v-10048f77]{padding:%?40?%;display:flex;align-items:center;justify-content:center;width:calc(100% - %?80?%)}.cont_text .video_cont .tip .tip_line[data-v-10048f77]{height:%?1?%;background:#d1d3d6;flex:1}.cont_text .video_cont .tip .tip_text[data-v-10048f77]{color:#2d2d2d;font-size:%?26?%;padding:0 %?25?%}.cont_text .video_cont .slove[data-v-10048f77]{border-radius:%?6?%;background:#f6f8fb;padding:%?20?% %?30?%;display:flex;align-items:center;justify-content:space-between;width:calc(100% %?-60?%)}.cont_text .video_cont .slove .slove_text[data-v-10048f77]{color:#2d2d2d;font-size:%?24?%}.cont_text .video_cont .slove_cont[data-v-10048f77]{display:flex;padding:%?20?% 0;justify-content:space-between;width:100%}.cont_text .video_cont .slove_cont .cont_li[data-v-10048f77]{width:25%;border-radius:%?10?%;background:#f7f8f9;padding:%?20?%;display:flex;flex-direction:column;align-items:center;justify-content:center}.cont_text .video_cont .slove_cont .cont_li .li_img[data-v-10048f77]{width:%?70?%;height:%?70?%}.cont_text .video_cont .slove_cont .cont_li .li_text[data-v-10048f77]{color:#666;font-size:%?24?%;font-style:normal;font-weight:400;line-height:%?40?%;text-align:center;height:%?80?%}.cont_text .bottom[data-v-10048f77]{width:100%;background:#fff;position:fixed;bottom:0;display:flex;border-top:%?1?% solid #e7e7e7;padding-top:%?20?%}.cont_text .bottom .bottom_left[data-v-10048f77]{width:35%;padding:%?20?%}.cont_text .bottom .bottom_left .left_text[data-v-10048f77]{color:#eb504b;font-size:%?28?%;font-style:normal;font-weight:600;line-height:%?52?%}.cont_text .bottom .bottom_left .right_text[data-v-10048f77]{color:#eb504b;font-size:%?52?%;font-style:normal;font-weight:700}.cont_text .bottom .bottom_cont[data-v-10048f77]{display:flex;justify-content:center;align-items:center;flex-direction:column;padding-bottom:%?25?%;width:65%}.cont_text .bottom .bottom_cont .bottom_buy[data-v-10048f77]{width:90%;height:%?80?%;background:#1f64ff;border-radius:6px;font-style:normal;font-weight:500;font-size:14px;line-height:20px;color:#fff;display:flex;justify-content:center;align-items:center;margin:auto}.cont_text .bottom .bottom_cont .bottom_desc[data-v-10048f77]{height:%?34?%;font-style:normal;font-weight:400;font-size:%?24?%;line-height:%?34?%;margin:%?20?% auto 0;text-align:center}.bottoms[data-v-10048f77]{width:100%;background:#fff;position:fixed;bottom:0;z-index:999}.bottoms .bottom_cont[data-v-10048f77]{width:calc(100% - %?40?%);padding:%?20?%;display:flex;flex-direction:column}.bottoms .bottom_cont .cont_text[data-v-10048f77]{color:#3e7aff;font-size:%?28?%;font-style:normal;font-weight:400;line-height:%?60?%}.bottoms .bottom_buy[data-v-10048f77]{width:calc(100%);height:%?80?%;background:#1f64ff;border-radius:6px;font-style:normal;font-weight:500;font-size:14px;line-height:20px;color:#fff;display:flex;justify-content:center;align-items:center}",""]),t.exports=e},"8b2f":function(t,e,i){"use strict";(function(t){i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.activateConsume=function(e){return(0,n.get)({url:t.baseUrl+"/api/sv_voice/activate_consume",data:e})},e.againVoice=function(e){return(0,n.JsomPut)({url:t.baseUrl+"/api/sv_voice/volcengine_voice_train",data:e})},e.creatMessage=function(e){return(0,n.post)({url:t.figureUrl+"/beings/message/",data:e})},e.creatModel=function(e){return(0,n.post)({url:t.figureUrl+"/beings/models/",data:e})},e.creatVoice=function(e){return(0,n.JsomPost)({url:t.baseUrl+"/api/sv_voice/volcengine_voice_train",data:e})},e.delMessage=function(e){return(0,n.del)({url:t.figureUrl+"/beings/message/",data:e})},e.delModel=function(e){return(0,n.del)({url:t.figureUrl+"/beings/models/",data:e})},e.editModel=function(e){return(0,n.JsomPut)({url:t.figureUrl+"/beings/models/",data:e})},e.getActivateResidueNumber=function(e){return(0,n.get)({url:t.baseUrl+"/api/sv_voice/get_activate_residue_number",data:e})},e.getBaseModel=function(e){return(0,n.get)({url:t.figureUrl+"/beings/base_models/",data:e})},e.getBusiness=function(e){return(0,n.get)({url:t.baseUrl+"/api/sv_voice/get_business",data:e})},e.getEnv=function(e){return(0,n.get)({url:t.figureUrl+"/beings/env_change/",data:e})},e.getExchange=function(e){return(0,n.get)({url:t.baseUrl+"/api/sv_voice/activate_exchange",data:e})},e.getInteract=function(e){return(0,n.post)({url:t.figureUrl+"/beings/interact/",data:e})},e.getMessage=function(e){return(0,n.get)({url:t.figureUrl+"/beings/message/",data:e})},e.getModelList=function(e){return(0,n.get)({url:t.figureUrl+"/beings/models/",data:e})},e.getShare=function(e){return(0,n.post)({url:t.figureUrl+"/beings/share/",data:e})},e.getStats=function(e){return(0,n.post)({url:t.figureUrl+"/beings/stats/",data:e})},e.getVoiceIdQuery=function(e){return(0,n.get)({url:t.baseUrl+"/api/sv_voice/VoiceIdQuery",data:e})},e.getVoiceList=function(e){return(0,n.get)({url:t.baseUrl+"/api/sv_voice/volcengine_voice_train",data:e})},e.getapplication=function(e){return(0,n.JsomPost)({url:t.memberUrl+"/pay/message_center/",data:e})},e.getapplicationContent=function(e){return(0,n.JsomPost)({url:t.memberUrl+"/pay/message_center_content/",data:e})},e.openVoice=function(e){return(0,n.put)({url:t.baseUrl+"/api/sv_voice/enable_voice",data:e})},e.postDuration=function(e){return(0,n.post)({url:t.baseUrl+"/api/sv_voice/short_video_get_duration",data:e})},e.postHumanCl=function(e){return(0,n.post)({url:t.baseUrl+"/api/sv_voice/short_video_digital_human_clone",data:e})},e.updateVisit=function(e){return(0,n.put)({url:t.figureUrl+"/beings/visit/",data:e})};i("49e2");var n=i("135e")}).call(this,i("c8ba"))},cd1f:function(t,e,i){"use strict";i.r(e);var n=i("7551"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},d781:function(t,e,i){var n=i("603e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("76601fb3",n,!0,{sourceMap:!1,shadowMode:!1})},d80c:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={uTabs:i("c3c0").default,uInput:i("34d4").default,uIcon:i("fc92").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"heads"},[i("v-uni-view",{staticClass:"tab_li"},[i("u-tabs",{attrs:{list:t.tablist,lineWidth:"45",lineHeight:"2",lineColor:"#1f64ff",activeStyle:{color:"#1F64FF","font-size":"30rpx"},current:t.current,inactiveStyle:{"font-size":"30rpx"}},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.tabsChange.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"cont_title"},[i("v-uni-view",{staticClass:"title_t"},[t._v("声音克隆")]),i("v-uni-view",{staticClass:"title_b"},[t._v("轻松3步，复刻高品质真人声音")])],1),i("v-uni-view",{staticClass:"cont_text"},[i("v-uni-view",{staticClass:"cont_step"},[i("v-uni-view",{staticClass:"step_t"},[i("v-uni-text",{staticClass:"t_l"},[t._v("1")]),i("v-uni-text",{staticClass:"t_r"},[t._v("创建你的声音")])],1),i("v-uni-view",{staticClass:"step_b"},[i("u-input",{attrs:{inputAlign:"left",placeholder:"例如:埃隆马斯克",type:"text",maxlength:"10"},model:{value:t.voiceName,callback:function(e){t.voiceName=e},expression:"voiceName"}})],1)],1),i("v-uni-view",{staticClass:"cont_step",staticStyle:{"margin-top":"25rpx"}},[i("v-uni-view",{staticClass:"step_t"},[i("v-uni-text",{staticClass:"t_l"},[t._v("2")]),i("v-uni-text",{staticClass:"t_r"},[t._v("上传录制视频")])],1),0==t.videoList.length?i("v-uni-view",{staticClass:"voice_up",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveVideo.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"up_img",attrs:{src:t.icoImg1,mode:""}}),i("v-uni-text",{staticClass:"up_text",staticStyle:{padding:"20upx 0"}},[t._v("wav、mp3、ogg、m4a、aac、pcm,文件小于20MB")]),i("v-uni-text",{staticClass:"up_text"},[t._v("建议10s-30s的单个音频")])],1):t._e(),t._l(t.videoList,(function(e,n){return t.videoList.length>0?i("v-uni-view",{key:n,staticClass:"voice_up"},[i("v-uni-view",{staticClass:"up_del",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delVideo.apply(void 0,arguments)}}},[i("u-icon",{attrs:{name:"trash",color:"#000",size:"26"}})],1),i("Audio",{staticStyle:{width:"100%"},attrs:{audio:t.getImgUrl(e.audio_url),title:e.fileName}})],1):t._e()}))],2),i("v-uni-view",{staticClass:"video_cont"},[i("v-uni-view",{staticClass:"tip"},[i("v-uni-text",{staticClass:"tip_line"}),i("v-uni-text",{staticClass:"tip_text"},[t._v("录音规范")]),i("v-uni-text",{staticClass:"tip_line"})],1),i("v-uni-view",{staticClass:"slove",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toVoiceReq.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"slove_text"},[t._v("查看录音规范")]),i("u-icon",{attrs:{name:"arrow-right",color:"#000",size:"18"}})],1),i("v-uni-view",{staticClass:"slove_cont"},[i("v-uni-view",{staticClass:"cont_li"},[i("v-uni-image",{staticClass:"li_img",attrs:{src:t.icoImg2,mode:""}}),i("v-uni-text",{staticClass:"li_text"},[t._v("单人录音")])],1),i("v-uni-view",{staticClass:"cont_li"},[i("v-uni-image",{staticClass:"li_img",attrs:{src:t.icoImg3,mode:""}}),i("v-uni-text",{staticClass:"li_text"},[t._v("周围安静无噪音")])],1),i("v-uni-view",{staticClass:"cont_li"},[i("v-uni-image",{staticClass:"li_img",attrs:{src:t.icoImg4,mode:""}}),i("v-uni-text",{staticClass:"li_text"},[t._v("录制符合日常使用场景")])],1)],1)],1),i("v-uni-view",{staticClass:"cont_step",staticStyle:{"padding-bottom":"250upx"}},[i("v-uni-view",{staticClass:"step_t"},[i("v-uni-text",{staticClass:"t_l"},[t._v("3")]),i("v-uni-text",{staticClass:"t_r"},[t._v("点击开始训练，等待训练完成即可使用")])],1)],1),1==t.edit?i("v-uni-view",{staticClass:"bottoms"},[i("v-uni-view",{staticClass:"bottom_cont",staticStyle:{width:"100%"}},[i("v-uni-view",{staticClass:"bottom_buy",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.creatVoice.apply(void 0,arguments)}}},[t._v("开始训练")])],1)],1):i("v-uni-view",{staticClass:"bottoms"},[i("v-uni-view",{staticClass:"bottom_cont",staticStyle:{width:"100%"}},[i("v-uni-view",{staticClass:"bottom_buy",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.againVoice.apply(void 0,arguments)}}},[t._v("重新训练")])],1)],1)],1)],1)},a=[]},da47:function(t,e,i){"use strict";var n=i("d781"),o=i.n(n);o.a},e84f:function(t,e,i){"use strict";var n=i("7471"),o=i.n(n);o.a},f840:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"audio-card"},[i("v-uni-view",{staticClass:"title"},[t._v(t._s(t.title))]),i("v-uni-view",{staticClass:"audio"},[t.isPlay?t._e():i("v-uni-image",{staticClass:"play-icon",attrs:{mode:"scaleToFill",src:t.startImg},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.audioPlay.apply(void 0,arguments)}}}),t.isPlay?i("v-uni-image",{staticClass:"play-icon",attrs:{mode:"scaleToFill",src:t.endImg},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.audioPause.apply(void 0,arguments)}}}):t._e(),i("v-uni-view",{staticClass:"audio-main"},[i("v-uni-slider",{staticClass:"progress",attrs:{max:"100","block-size":"12","block-color":t.sliderColor,activeColor:t.activeColor,backgroundColor:t.backgroundColor,value:t.progress},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.handleChange.apply(void 0,arguments)},changing:function(e){arguments[0]=e=t.$handleEvent(e),t.handleProgress.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"time"},[i("v-uni-view",[t._v(t._s(t.dateFormart(t.currentTime)))]),i("v-uni-view",[t._v(t._s(t.dateFormart(t.duration)))])],1)],1)],1)],1)},o=[]},f969:function(t,e,i){"use strict";(function(t){i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("14d9");var o=i("5c9b"),a=i("8b2f"),s=n(i("fff3")),c={data:function(){return{tablist:[{name:"我的声音",index:1},{name:"声音克隆",index:2},{name:"合成配音",index:3}],current:1,voiceName:"",pay_price:0,productInfo:"",icoImg1:t.baseImg+"/xcx/com/hotel/com/message_center/icon_4.png",icoImg2:t.baseImg+"/xcx/com/hotel/com/message_center/icon_3.png",icoImg3:t.baseImg+"/xcx/com/hotel/com/message_center/icon_2.png",icoImg4:t.baseImg+"/xcx/com/hotel/com/message_center/icon_1.png",videoList:[],isClick:!0,edit:1,train_code:""}},components:{Audio:s.default},onLoad:function(t){if(t.edit){this.edit=t.edit;var e=JSON.parse(t.info);this.voiceName=e.voice_name,this.videoList=JSON.parse(e.audios),this.train_code=e.train_code,console.log(this.videoList,9996)}else this.edit=1},onShow:function(){this.getProduct()},methods:{tabsChange:function(t){console.log(t),this.current=t.index,0==this.current?uni.navigateTo({url:"/childCont/clone/my_voice"}):1==this.current?uni.navigateTo({url:"/childCont/clone/voice_clone"}):2==this.current&&uni.navigateTo({url:"/childCont/clone/copy_voice"})},getImgUrl:function(e){return t.baseImg+"/"+e},getProduct:function(){var t=this;(0,o.getProductList)({prod_cate_id:[9]}).then((function(e){2e4==e.code?(t.pay_price=e.data[9][0].prod_price,t.productInfo=e.data[9][0]):t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("获取失败！")}))},customizedVoice:function(){var t=this;(0,a.getVoiceIdQuery)().then((function(e){2e4==e.code?t.pay():uni.showModal({title:"提示",content:e.msg,confirmText:"知道了"})})).catch((function(e){t.$api.msg("获取失败！")}))},pay:function(){if(""==this.voiceName)return this.$api.msg("请填写声音名称");if(0==this.videoList.length)return this.$api.msg("请上传音频文件");var t=JSON.parse(uni.getStorageSync("userInfo")),e=uni.getStorageSync("openid"),i={user_id:t.user_id,prod_id:this.productInfo.prod_id,prod_cate_id:this.productInfo.prod_cate_id,prod_name:this.productInfo.prod_name,total_amount:this.productInfo.prod_price,price:this.productInfo.prod_price,open_id:e,quantity:1};if(0==this.isClick)return!1;this.isClick=!1;var n=this;(0,o.wxpay)(i).then((function(t){if(2e4==t.code){var e=t.data[0].req_data,i=t.data[0].order_id;wx.requestPayment({timeStamp:e.time_stamp,nonceStr:e.nonce_str,package:e.package,signType:e.sign_type,paySign:e.pay_sign,success:function(t){n.isClick=!0,n.getPayResult(i)},fail:function(t){n.isClick=!0,n.$api.msg("支付已关闭")}})}else n.$api.msg(t.msg),n.isClick=!0})).catch((function(t){n.isClick=!0,n.$api.msg("获取支付信息失败！")}))},getPayResult:function(t){var e=this,i={order_id:t};(0,o.getResult)(i).then((function(t){2e4==t.code?(e.$api.msg("支付成功"),e.isClick=!0,e.creatVoice()):(e.isClick=!0,e.$api.msg(t.msg))})).catch((function(t){e.isClick=!0,e.$api.msg("获取支付结果失败！")}))},creatVoice:function(){var t=this;if(""==this.voiceName)return this.$api.msg("请填写声音名称");if(0==this.videoList.length)return this.$api.msg("请上传音频文件");var e={audios:this.videoList,voice_name:this.voiceName};(0,a.creatVoice)(e).then((function(e){2e4==e.code?(t.current=0,uni.navigateTo({url:"/childCont/clone/my_voice"})):(t.$api.msg(e.msg),t.current=0,uni.navigateTo({url:"/childCont/clone/my_voice"}))})).catch((function(e){t.$api.msg("创建失败！")}))},saveVideo:function(){var e=this;uni.chooseFile({count:1,type:"all",extension:[".mp3",".wav",".m4a"],success:function(i){var n=i.tempFiles[0].size,o=i.tempFiles[0].name;if(n>20971520)e.$api.msg("该文件已超过20M，不能上传");else{var a=i.tempFilePaths[0],s={source:t.source},c=JSON.parse(uni.getStorageSync("userInfo"));c.token&&(s.Authorization=c.token),c.role&&(s.role=c.role),uni.uploadFile({url:t.baseUrl+"/api/sv_voice/audio_conversion",filePath:a,header:s,name:"image",formData:{image:a,image_name:o,oss_dir:"static",cate:"create_character"},success:function(t){var i=JSON.parse(t.data);if(2e4==i.code){var n=i.data.oss_url,o=i.data.name,a={audio_url:n,fileName:o};null==e.videoList&&(e.videoList=[]),e.videoList.push(a)}else e.$api.msg(i.msg)},fail:function(t){e.$api.msg("上传失败")}})}}})},delVideo:function(){this.videoList=[]},toVoiceReq:function(){uni.navigateTo({url:"/childCont/clone/clone_qs"})},againVoice:function(){var t=this;console.log(this.videoList,5589);var e={audios:this.videoList,voice_name:this.voiceName,train_code:this.train_code};(0,a.againVoice)(e).then((function(e){2e4==e.code?(t.current=0,uni.navigateTo({url:"/childCont/clone/my_voice"})):(t.$api.msg(e.msg),t.current=0,uni.navigateTo({url:"/childCont/clone/my_voice"}))})).catch((function(e){t.$api.msg("创建失败！")}))}}};e.default=c}).call(this,i("c8ba"))},fff3:function(t,e,i){"use strict";i.r(e);var n=i("f840"),o=i("cd1f");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("da47");var s=i("f0c5"),c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"020987a8",null,!1,n["a"],void 0);e["default"]=c.exports}}]);